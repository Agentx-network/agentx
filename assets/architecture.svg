<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 680" font-family="'Segoe UI', Arial, sans-serif">
  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#0a0015"/>
      <stop offset="50%" stop-color="#0d0020"/>
      <stop offset="100%" stop-color="#0a0015"/>
    </linearGradient>
    <linearGradient id="pink" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#FF0092"/>
      <stop offset="100%" stop-color="#AE00FF"/>
    </linearGradient>
    <linearGradient id="purple" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#AE00FF"/>
      <stop offset="100%" stop-color="#7B00CC"/>
    </linearGradient>
    <linearGradient id="blue" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#0088FF"/>
      <stop offset="100%" stop-color="#00CCFF"/>
    </linearGradient>
    <linearGradient id="green" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#00CC66"/>
      <stop offset="100%" stop-color="#00FF88"/>
    </linearGradient>
    <linearGradient id="orange" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#FF6600"/>
      <stop offset="100%" stop-color="#FFAA00"/>
    </linearGradient>
    <linearGradient id="title-grad" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#FF0092"/>
      <stop offset="100%" stop-color="#AE00FF"/>
    </linearGradient>
    <linearGradient id="border-grad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#FF009240"/>
      <stop offset="50%" stop-color="#AE00FF40"/>
      <stop offset="100%" stop-color="#FF009240"/>
    </linearGradient>
    <linearGradient id="flow-grad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#FF009260"/>
      <stop offset="100%" stop-color="#AE00FF60"/>
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feComposite in="SourceGraphic" in2="blur" operator="over"/>
    </filter>
    <filter id="soft">
      <feGaussianBlur stdDeviation="1.5" result="blur"/>
      <feComposite in="SourceGraphic" in2="blur" operator="over"/>
    </filter>
    <filter id="box-shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#00000060"/>
    </filter>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#AE00FF80"/>
    </marker>
    <marker id="arrow-pink" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#FF009280"/>
    </marker>
    <marker id="arrow-green" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#00FF8880"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="680" fill="url(#bg)" rx="16"/>
  <rect x="1" y="1" width="898" height="678" rx="16" fill="none" stroke="url(#border-grad)" stroke-width="1.5"/>

  <!-- Grid -->
  <g opacity="0.02">
    <line x1="150" y1="0" x2="150" y2="680" stroke="#AE00FF"/>
    <line x1="450" y1="0" x2="450" y2="680" stroke="#AE00FF"/>
    <line x1="750" y1="0" x2="750" y2="680" stroke="#AE00FF"/>
  </g>

  <!-- Title -->
  <text x="450" y="38" text-anchor="middle" fill="url(#title-grad)" font-size="24" font-weight="bold" filter="url(#soft)">AGENTX ARCHITECTURE</text>
  <text x="450" y="58" text-anchor="middle" fill="#8866aa" font-size="11" letter-spacing="3">STREAMING · PARALLEL · EDGE-NATIVE</text>

  <!-- ═══ LAYER 1: CHANNELS (top) ═══ -->
  <text x="450" y="88" text-anchor="middle" fill="#553366" font-size="10" letter-spacing="2">CHAT CHANNELS</text>

  <!-- Channel boxes -->
  <g filter="url(#box-shadow)">
    <rect x="40" y="96" width="100" height="36" rx="8" fill="#0d0020" stroke="#0088FF50" stroke-width="1"/>
    <text x="90" y="118" text-anchor="middle" fill="#00AAFF" font-size="11" font-weight="600">Telegram</text>
  </g>
  <g filter="url(#box-shadow)">
    <rect x="155" y="96" width="100" height="36" rx="8" fill="#0d0020" stroke="#0088FF50" stroke-width="1"/>
    <text x="205" y="118" text-anchor="middle" fill="#00AAFF" font-size="11" font-weight="600">Discord</text>
  </g>
  <g filter="url(#box-shadow)">
    <rect x="270" y="96" width="100" height="36" rx="8" fill="#0d0020" stroke="#0088FF50" stroke-width="1"/>
    <text x="320" y="118" text-anchor="middle" fill="#00AAFF" font-size="11" font-weight="600">WhatsApp</text>
  </g>
  <g filter="url(#box-shadow)">
    <rect x="385" y="96" width="100" height="36" rx="8" fill="#0d0020" stroke="#0088FF50" stroke-width="1"/>
    <text x="435" y="118" text-anchor="middle" fill="#00AAFF" font-size="11" font-weight="600">Slack</text>
  </g>
  <g filter="url(#box-shadow)">
    <rect x="500" y="96" width="100" height="36" rx="8" fill="#0d0020" stroke="#0088FF50" stroke-width="1"/>
    <text x="550" y="118" text-anchor="middle" fill="#00AAFF" font-size="11" font-weight="600">LINE</text>
  </g>
  <g filter="url(#box-shadow)">
    <rect x="615" y="96" width="76" height="36" rx="8" fill="#0d0020" stroke="#0088FF50" stroke-width="1"/>
    <text x="653" y="118" text-anchor="middle" fill="#00AAFF" font-size="11" font-weight="600">QQ</text>
  </g>
  <g filter="url(#box-shadow)">
    <rect x="704" y="96" width="84" height="36" rx="8" fill="#0d0020" stroke="#0088FF50" stroke-width="1"/>
    <text x="746" y="118" text-anchor="middle" fill="#00AAFF" font-size="11" font-weight="600">DingTalk</text>
  </g>
  <g filter="url(#box-shadow)">
    <rect x="800" y="96" width="68" height="36" rx="8" fill="#0d0020" stroke="#0088FF50" stroke-width="1"/>
    <text x="834" y="118" text-anchor="middle" fill="#00AAFF" font-size="11" font-weight="600">+3 more</text>
  </g>

  <!-- Flow arrows: Channels → Bus -->
  <line x1="450" y1="132" x2="450" y2="162" stroke="#0088FF60" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="470" y="152" fill="#0088FF80" font-size="9">messages</text>

  <!-- ═══ LAYER 2: MESSAGE BUS ═══ -->
  <g filter="url(#box-shadow)">
    <rect x="150" y="162" width="600" height="44" rx="10" fill="#0d0020" stroke="url(#pink)" stroke-width="1.5"/>
    <text x="450" y="188" text-anchor="middle" fill="url(#pink)" font-size="14" font-weight="bold" filter="url(#soft)">MESSAGE BUS</text>
    <text x="260" y="188" text-anchor="middle" fill="#553366" font-size="9">Inbound</text>
    <text x="640" y="188" text-anchor="middle" fill="#553366" font-size="9">Outbound + Stream Deltas</text>
  </g>

  <!-- Flow arrows: Bus → Agent Loop -->
  <line x1="450" y1="206" x2="450" y2="240" stroke="url(#flow-grad)" stroke-width="2" marker-end="url(#arrow-pink)"/>

  <!-- ═══ LAYER 3: AGENT LOOP (center) ═══ -->
  <g filter="url(#box-shadow)">
    <rect x="100" y="240" width="700" height="160" rx="14" fill="#0d001a" stroke="url(#pink)" stroke-width="2"/>

    <!-- Agent Loop title -->
    <text x="450" y="268" text-anchor="middle" fill="url(#title-grad)" font-size="16" font-weight="bold" filter="url(#soft)">AGENT LOOP</text>

    <!-- Inner boxes -->
    <!-- Context Builder -->
    <rect x="130" y="282" width="150" height="50" rx="8" fill="#120025" stroke="#AE00FF40" stroke-width="1"/>
    <text x="205" y="304" text-anchor="middle" fill="#BB66FF" font-size="11" font-weight="600">Context Builder</text>
    <text x="205" y="320" text-anchor="middle" fill="#553366" font-size="9">System + History + Tools</text>

    <!-- Nexus Engine -->
    <rect x="310" y="282" width="180" height="50" rx="8" fill="#1a0030" stroke="url(#pink)" stroke-width="1.5"/>
    <text x="400" y="300" text-anchor="middle" fill="#FF55B8" font-size="12" font-weight="bold">Nexus Engine</text>
    <text x="400" y="316" text-anchor="middle" fill="#FF88CC" font-size="9">Stream · Parallel · Native FC</text>

    <!-- Session Manager -->
    <rect x="520" y="282" width="150" height="50" rx="8" fill="#120025" stroke="#AE00FF40" stroke-width="1"/>
    <text x="595" y="304" text-anchor="middle" fill="#BB66FF" font-size="11" font-weight="600">Session Manager</text>
    <text x="595" y="320" text-anchor="middle" fill="#553366" font-size="9">History + Compression</text>

    <!-- Streaming row -->
    <rect x="130" y="345" width="260" height="40" rx="8" fill="#120025" stroke="#00FF8830" stroke-width="1"/>
    <text x="260" y="365" text-anchor="middle" fill="#00FF88" font-size="10" font-weight="600">OnTextDelta → Stream to Channel</text>
    <text x="260" y="378" text-anchor="middle" fill="#00AA6640" font-size="8">word-by-word · 500ms debounce</text>

    <!-- Step result row -->
    <rect x="410" y="345" width="260" height="40" rx="8" fill="#120025" stroke="#FFAA0030" stroke-width="1"/>
    <text x="540" y="365" text-anchor="middle" fill="#FFAA44" font-size="10" font-weight="600">OnStepFinish → Save to Session</text>
    <text x="540" y="378" text-anchor="middle" fill="#AA770040" font-size="8">auto-compress on overflow</text>
  </g>

  <!-- ═══ LAYER 4: TOOLS (left branch) ═══ -->
  <!-- Arrow: Agent Loop → Tools -->
  <line x1="250" y1="400" x2="250" y2="440" stroke="#00FF8860" stroke-width="2" marker-end="url(#arrow-green)"/>
  <text x="270" y="430" fill="#00FF8880" font-size="9">tool calls</text>

  <g filter="url(#box-shadow)">
    <rect x="40" y="440" width="420" height="200" rx="14" fill="#0d001a" stroke="url(#green)" stroke-width="1.5"/>
    <text x="250" y="468" text-anchor="middle" fill="url(#green)" font-size="14" font-weight="bold" filter="url(#soft)">TOOL REGISTRY</text>
    <text x="250" y="484" text-anchor="middle" fill="#553366" font-size="9">Nexus Tool Adapters · Parallel Execution</text>

    <!-- Tool grid -->
    <!-- Row 1 -->
    <rect x="60" y="496" width="88" height="30" rx="6" fill="#0a1a10" stroke="#00CC6640" stroke-width="1"/>
    <text x="104" y="515" text-anchor="middle" fill="#00CC66" font-size="10">read_file</text>

    <rect x="158" y="496" width="88" height="30" rx="6" fill="#0a1a10" stroke="#00CC6640" stroke-width="1"/>
    <text x="202" y="515" text-anchor="middle" fill="#00CC66" font-size="10">write_file</text>

    <rect x="256" y="496" width="88" height="30" rx="6" fill="#0a1a10" stroke="#00CC6640" stroke-width="1"/>
    <text x="300" y="515" text-anchor="middle" fill="#00CC66" font-size="10">exec</text>

    <rect x="354" y="496" width="88" height="30" rx="6" fill="#0a1a10" stroke="#00CC6640" stroke-width="1"/>
    <text x="398" y="515" text-anchor="middle" fill="#00CC66" font-size="10">web_search</text>

    <!-- Row 2 -->
    <rect x="60" y="534" width="88" height="30" rx="6" fill="#0a1a10" stroke="#00CC6640" stroke-width="1"/>
    <text x="104" y="553" text-anchor="middle" fill="#00CC66" font-size="10">edit_file</text>

    <rect x="158" y="534" width="88" height="30" rx="6" fill="#0a1a10" stroke="#00CC6640" stroke-width="1"/>
    <text x="202" y="553" text-anchor="middle" fill="#00CC66" font-size="10">web_fetch</text>

    <rect x="256" y="534" width="88" height="30" rx="6" fill="#0a1a10" stroke="#00CC6640" stroke-width="1"/>
    <text x="300" y="553" text-anchor="middle" fill="#00CC66" font-size="10">cron</text>

    <rect x="354" y="534" width="88" height="30" rx="6" fill="#0a1a10" stroke="#00CC6640" stroke-width="1"/>
    <text x="398" y="553" text-anchor="middle" fill="#00CC66" font-size="10">message</text>

    <!-- Row 3 -->
    <rect x="60" y="572" width="88" height="30" rx="6" fill="#0a1a10" stroke="#FFAA0040" stroke-width="1"/>
    <text x="104" y="591" text-anchor="middle" fill="#FFAA44" font-size="10">subagent</text>

    <rect x="158" y="572" width="88" height="30" rx="6" fill="#0a1a10" stroke="#FFAA0040" stroke-width="1"/>
    <text x="202" y="591" text-anchor="middle" fill="#FFAA44" font-size="10">spawn</text>

    <rect x="256" y="572" width="88" height="30" rx="6" fill="#0a1a10" stroke="#00AAFF40" stroke-width="1"/>
    <text x="300" y="591" text-anchor="middle" fill="#00AAFF" font-size="10">i2c / spi</text>

    <rect x="354" y="572" width="88" height="30" rx="6" fill="#0a1a10" stroke="#AE00FF40" stroke-width="1"/>
    <text x="398" y="591" text-anchor="middle" fill="#BB66FF" font-size="10">skills</text>

    <!-- Parallel indicator -->
    <text x="250" y="626" text-anchor="middle" fill="#00AA6680" font-size="9" letter-spacing="1">PARALLEL: read_file · write_file · edit_file · web_search · web_fetch · skills</text>
  </g>

  <!-- ═══ LAYER 4: PROVIDERS (right branch) ═══ -->
  <!-- Arrow: Agent Loop → Providers -->
  <line x1="650" y1="400" x2="650" y2="440" stroke="#AE00FF60" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="670" y="430" fill="#AE00FF80" font-size="9">LLM calls</text>

  <g filter="url(#box-shadow)">
    <rect x="490" y="440" width="380" height="200" rx="14" fill="#0d001a" stroke="url(#purple)" stroke-width="1.5"/>
    <text x="680" y="468" text-anchor="middle" fill="url(#purple)" font-size="14" font-weight="bold" filter="url(#soft)">NEXUS PROVIDER LAYER</text>
    <text x="680" y="484" text-anchor="middle" fill="#553366" font-size="9">Unified Abstraction · Fallback + Cooldown</text>

    <!-- Provider boxes -->
    <rect x="510" y="496" width="110" height="34" rx="6" fill="#1a0028" stroke="#AE00FF50" stroke-width="1"/>
    <text x="565" y="510" text-anchor="middle" fill="#CC88FF" font-size="11" font-weight="600">Anthropic</text>
    <text x="565" y="524" text-anchor="middle" fill="#553366" font-size="8">Claude 4.x</text>

    <rect x="630" y="496" width="110" height="34" rx="6" fill="#1a0028" stroke="#AE00FF50" stroke-width="1"/>
    <text x="685" y="510" text-anchor="middle" fill="#CC88FF" font-size="11" font-weight="600">OpenAI</text>
    <text x="685" y="524" text-anchor="middle" fill="#553366" font-size="8">GPT-5.x</text>

    <rect x="750" y="496" width="100" height="34" rx="6" fill="#1a0028" stroke="#AE00FF50" stroke-width="1"/>
    <text x="800" y="510" text-anchor="middle" fill="#CC88FF" font-size="11" font-weight="600">Google</text>
    <text x="800" y="524" text-anchor="middle" fill="#553366" font-size="8">Gemini</text>

    <!-- OpenAI-compat row -->
    <rect x="510" y="542" width="340" height="34" rx="6" fill="#120020" stroke="#AE00FF30" stroke-width="1"/>
    <text x="680" y="556" text-anchor="middle" fill="#9966CC" font-size="10" font-weight="600">OpenAI-Compatible Protocol</text>
    <text x="680" y="568" text-anchor="middle" fill="#553366" font-size="8">OpenRouter · Groq · DeepSeek · Ollama · Mistral · Cerebras · Qwen · NVIDIA · +5 more</text>

    <!-- Fallback indicator -->
    <rect x="510" y="588" width="340" height="36" rx="6" fill="#0d0018" stroke="#FF009230" stroke-width="1"/>
    <text x="680" y="606" text-anchor="middle" fill="#FF55B8" font-size="10" font-weight="600">FallbackLanguageModel</text>
    <text x="680" y="618" text-anchor="middle" fill="#553366" font-size="8">Primary → Backup · Cooldown tracking · Auto-retry</text>
  </g>

  <!-- Bottom stats bar -->
  <line x1="40" y1="652" x2="860" y2="652" stroke="#FF009230"/>
  <text x="150" y="672" text-anchor="middle" fill="#FF55B8" font-size="13" font-weight="bold" filter="url(#soft)">~5 MB</text>
  <text x="150" y="672" text-anchor="middle" fill="#FF55B8" font-size="13" font-weight="bold">~5 MB</text>
  <text x="300" y="672" text-anchor="middle" fill="#AE00FF" font-size="13" font-weight="bold">0.3s boot</text>
  <text x="450" y="672" text-anchor="middle" fill="#00AAFF" font-size="13" font-weight="bold">10 channels</text>
  <text x="600" y="672" text-anchor="middle" fill="#00FF88" font-size="13" font-weight="bold">16 tools</text>
  <text x="750" y="672" text-anchor="middle" fill="#FFAA44" font-size="13" font-weight="bold">15+ providers</text>
</svg>